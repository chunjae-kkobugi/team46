<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{include/head :: head}"></th:block>
    <title th:text="${detail.title}"></title>

    <link rel="stylesheet" th:src="@{/js/jqeury-ui-1.13.2/jquery-ui.css}">
    <link rel="stylesheet" th:src="@{/js/jqeury-ui-1.13.2/jquery-ui.strucutre.css}">
    <link rel="stylesheet" th:src="@{/js/jqeury-ui-1.13.2/jquery-ui.theme.css}">

    <script th:src="@{/js/jquery-3.4.1.min.js}"></script>
    <script th:src="@{/js/sockjs.min.js}"></script>
    <script th:src="@{/js/stomp.min.js}"></script>
    <script th:src="@{/js/jquery-ui-1.13.2/jquery-ui.js}"></script>

    <style>
        /* 겉부분의 디자인 변경 */
        input[type=color] {
            width: 63px;
            height: 50px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-color: transparent;
            border: none;
        }

        /* 안쪽부분의 디자인 변경 */
        input[type=color]::-webkit-color-swatch {
            border-radius: 30px;
            border: 5px solid;
        }

        .register {
            display: none;
        }

        #sortable { list-style-type: none; margin: 1rem; padding: 0; width: 350px; }
        #sortable li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 100px; height: 90px; font-size: 20px; text-align: center; border: 1px solid black;}
    </style>
</head>

<body class="d-flex flex-column min-vh-100">
<th:block th:replace="~{include/header :: header}" class="mb-0"></th:block>

<section class="section pb-5" th:style="'background-color : '+ ${detail.bgColor}">
    <div class="mt-4 pb-3 " style="border-bottom: 1px solid">
        <div class="row justify-content-between">
            <div class="col-6">
                <h1 th:text="${detail.title}" class="ms-5"></h1>
            </div>
            <div class="col-6">
                <a th:href="@{/}" class="btn btn-main me-5 float-end"><i class="fas fa-sign-out-alt"></i> 메인으로 </a>
            </div>
        </div>
    </div>

    <div class="post" style="min-height: 700px;">
        <!-- 포스트잇 드롭다운 -->
        <div class="float-end m-4">
            <div style="margin-left: 125px"><i class="fas fa-plus-circle fa-3x" style="color: #51B56D; cursor: pointer" id="postMenu"></i></div>
            <div id="postMenuList"
                 class="mt-3 p-2 pb-0 pt-3"
                 style="display: none; width: auto; height: auto; border: #333 solid 1px; border-radius: 20px;">
                <ul class="p-0" style="list-style-type: none">
                    <li><button type="button" id="postRegisterBtn" class="btn btn-outline-main mb-2">포스트잇 쓰기</button></li>
                    <li><a th:href="@{/post/register}" class="btn btn-outline-main mb-2">버튼2</a></li>
                    <li><a th:href="@{/post/register}" class="btn btn-outline-main mb-2">버튼3</a></li>
                    <li><a th:href="@{/post/register}" class="btn btn-outline-main mb-2">버튼4</a></li>
                    <li><a th:href="@{/post/register}" class="btn btn-outline-main mb-2">버튼5</a></li>
                </ul>
            </div>
        </div>
        <!-- 포스트잇 드롭다운 끝 -->

        <h1>포스트잇 배치 될 위치</h1>
        <th:block th:if="${detail.layout == 'GRID'}" th:replace="~{include/boardTemplate :: grid-layout}" class="mb-0" />

        <div id="postRegister" class="album py-5 bg-body-tertiary register">
            <div class="container-fluid">
                <div class="row g-3">
                    <div class="col-3">
                        <div class="card shadow-sm">
                            <form enctype="multipart/form-data" onsubmit="postAddBtn(this)">
                                <input name="content" type="text" maxlength="200" class="form-control" placeholder="내용을 입력하세요" style="height: 255px;">
                                <input type="hidden" name="bno" id="bno" th:value="${detail.bno}">
                                <div class="justify-content-center row">
                                    <input type="color" class="col-2 form-control" name="bgColor" id="bgColor" value="#ffffff">
                                    <input type="file" class="col-9 form-control me-2 mt-2 uploadFiles" id="postFile" name="postFile" style="height: 100%">
                                </div>
                                <button type="submit" class="btn btn-main mb-2 ms-3 mt-1"> 포스트잇 등록 </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 포스트잇 등록창 창 끝-->
</section>

<th:block th:replace="~{include/footer :: footer}"></th:block>
</body>

<script th:inline="javascript">
    const bno = /*[[${detail.bno}]]*/ 1;
    // 포스트잇 드롭다운
    $(document).ready(function(){
        var sw = true;
        sw =! sw;
        $("#postMenu").click(function () {
            if (sw==true) {
                $("#postMenuList").slideDown()
                sw = false;
            } else if(sw==false){
                $("#postMenuList").slideUp()
                sw = true;
            }
        })
    })

    // 포스트잇 글쓰기 영역
    $("#postRegisterBtn").click(function (){
        $("#postRegister").removeClass("register")
    })
</script>
<script th:src="@{/js/postSocket.js}"></script>
<script th:src="@{/js/postjs.js}"></script>
</html>